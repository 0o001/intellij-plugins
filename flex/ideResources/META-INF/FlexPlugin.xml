<idea-plugin version="2" xmlns:xi="http://www.w3.org/2001/XInclude">
  <id>com.intellij</id>
  <name>IDEA CORE</name>

  <application-components>
    <component>
      <implementation-class>com.intellij.ultimate.UltimateVerifier</implementation-class>
    </component>
  </application-components>

  <xi:include href="/idea/RichPlatformPlugin.xml" xpointer="xpointer(/idea-plugin/*)"/>
  <module value="com.intellij.modules.flexide"/>
  <module value="com.intellij.modules.all"/>
  <xi:include href="/META-INF/ultimate.xml" xpointer="xpointer(/idea-plugin/*)"/>

  <project-components>
    <component>
      <interface-class>com.intellij.psi.JavaPsiFacade</interface-class>
      <implementation-class>com.intellij.psi.impl.JavaPsiFacadeImpl</implementation-class>
    </component>
  </project-components>

  <extensionPoints>
    <!--for JavaPsiFacade-->
    <extensionPoint name="javadocTagInfo" area="IDEA_PROJECT" interface="com.intellij.psi.javadoc.JavadocTagInfo"/>
    <extensionPoint name="java.elementFinder" area="IDEA_PROJECT" interface="com.intellij.psi.PsiElementFinder"/>
    <extensionPoint name="java.shortNamesCache" area="IDEA_PROJECT" interface="com.intellij.psi.search.PsiShortNamesCache"/>
  </extensionPoints>

  <extensions defaultExtensionNs="com.intellij">
    <projectService serviceInterface="com.intellij.psi.impl.file.PsiDirectoryFactory"
                    serviceImplementation="com.intellij.psi.impl.file.PsiDirectoryFactoryImpl"/>
    <projectService serviceInterface="com.intellij.usages.impl.rules.DirectoryGroupingRule"
                    serviceImplementation="com.intellij.usages.impl.rules.DirectoryGroupingRule"/>
    <highlightVisitor implementation="com.intellij.codeInsight.daemon.impl.DefaultHighlightVisitor"/>
    <fileTypeFactory implementation="com.intellij.openapi.fileTypes.impl.JavaFileTypeFactory"/>
    <applicationService serviceInterface="com.intellij.psi.JavaDirectoryService"
                        serviceImplementation="com.intellij.psi.impl.file.JavaDirectoryServiceImpl"/>
    <projectService serviceInterface="com.intellij.openapi.roots.PackageIndex"
                    serviceImplementation="com.intellij.openapi.roots.impl.ProjectPackageIndexImpl"/>
    <moduleService serviceInterface="com.intellij.openapi.roots.ModulePackageIndex"
                   serviceImplementation="com.intellij.openapi.roots.impl.ModulePackageIndexImpl"/>
    <refactoring.copyHandler implementation="com.intellij.refactoring.copy.CopyFilesOrDirectoriesHandler"/>
    <refactoring.moveHandler implementation="com.intellij.refactoring.move.moveFilesOrDirectories.MoveFilesOrDirectoriesHandler"/>
    <projectService serviceInterface="com.intellij.ide.projectView.impl.nodes.ProjectViewDirectoryHelper"
                    serviceImplementation="com.intellij.ide.projectView.impl.nodes.ProjectViewDirectoryHelper"/>
    <applicationService serviceInterface="com.intellij.codeEditor.printing.FileSeparatorProvider"
                        serviceImplementation="com.intellij.codeEditor.printing.FileSeparatorProvider"/>
    <applicationService serviceInterface="com.intellij.codeInsight.TargetElementUtilBase"
                        serviceImplementation="com.intellij.codeInsight.TargetElementUtilBase"/>
    <applicationService serviceInterface="com.intellij.profile.codeInspection.InspectionProfileManager"
                        serviceImplementation="com.intellij.profile.codeInspection.InspectionProfileManager"/>



    <lang.parserDefinition language="JAVA" implementationClass="com.intellij.lang.java.JavaParserDefinition"/>

    <lang.ast.factory language="JAVA" implementationClass="com.intellij.psi.impl.source.tree.JavaASTFactory"/>

    <iconProvider implementation="com.intellij.psi.impl.JavaDirectoryIconProvider"/>
    <moduleExtension implementation="com.intellij.openapi.roots.impl.CompilerModuleExtensionImpl"/>
    <directoryIndexExcludePolicy implementation="com.intellij.openapi.roots.impl.ExcludeCompilerOutputPolicy"/>

    <patternDialectProvider implementation="com.intellij.packageDependencies.ui.PackagePatternProvider" id="package" order="before file" />
    <scopeDescriptorProvider implementation="com.intellij.ide.util.scopeChooser.HierarchyScopeDescriptorProvider"/>

    <projectService serviceInterface="com.intellij.ide.todo.nodes.TodoTreeHelper"
                    serviceImplementation="com.intellij.ide.todo.nodes.TodoJavaTreeHelper"/>

    <defaultTemplatePropertiesProvider implementation="com.intellij.ide.fileTemplates.TemplatePackagePropertyProvider"/>

    <projectViewPane implementation="com.intellij.ide.projectView.impl.PackageViewPane"/>

  </extensions>

</idea-plugin>
