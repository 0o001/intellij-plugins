<?xml version="1.0" encoding="iso-8859-1"?>
<idea-plugin>
  <name>Tapestry support</name>
  <id>com.intellij.tapestry</id>
  <version>1.0</version>
  <vendor>JetBrains</vendor>
  <description>Provides Tapestry 5.1 integration.</description>

  <depends>IntentionPowerPack</depends>
  <depends>com.intellij.javaee</depends>

  <helpset file="help.jar" path="/Help.hs"/>

  <extensions defaultExtensionNs="com.intellij">
    <errorHandler implementation="com.intellij.diagnostic.ITNReporter"/>

    <frameworkSupport implementation="com.intellij.tapestry.intellij.facet.TapestryFrameworkSupportProvider"/>

    <fileTemplateGroup implementation="com.intellij.tapestry.intellij.TapestryFileTemplateGroupFactory"/>

    <colorSettingsPage implementation="com.intellij.tapestry.intellij.lang.TemplateColorSettingsPage"/>
    
    <fileTypeFactory implementation="com.intellij.tapestry.lang.TmlFileTypeFactory"/>
    <lang.fileViewProviderFactory language="TML" implementationClass="com.intellij.tapestry.lang.TmlFileViewProviderFactory"/>
    <syntaxHighlighter key="TML" implementationClass="com.intellij.tapestry.lang.TmlHighlighter"/>
    <lang.parserDefinition language="TML" implementationClass="com.intellij.tapestry.psi.TmlParserDefinition"/>
    <lang.parserDefinition language="TEL" implementationClass="com.intellij.tapestry.psi.TelParserDefinition"/>

    <annotator language="TML" implementationClass="com.intellij.tapestry.intellij.lang.annotator.TemplateTagAnnotator"/>

    <psi.referenceContributor implementation="com.intellij.tapestry.intellij.lang.reference.TapestryReferenceContributor"/>

    <xml.xmlExtension implementation="com.intellij.tapestry.intellij.lang.descriptor.TapestryXmlExtension"/>

    <xml.schemaProvider implementation="com.intellij.tapestry.intellij.lang.descriptor.TapestrySchemaProvider"/>

    <xml.elementDescriptorProvider implementation="com.intellij.tapestry.intellij.lang.descriptor.TapestryTagDescriptorProvider"/>

    <lang.formatter language="TML" implementationClass="com.intellij.lang.xhtml.XhtmlFormattingModelBuilder"/>

    <toolWindow id="Tapestry"
                anchor="bottom"
                secondary="false"
                icon="/com/intellij/tapestry/core/icons/tapestry_logo_small.png"
                factoryClass="com.intellij.tapestry.intellij.toolwindow.TapestryToolWindowFactory"
                conditionClass="com.intellij.tapestry.intellij.toolwindow.TapestryToolWindowFactory"/>

    <projectViewPane implementation="com.intellij.tapestry.intellij.view.TapestryProjectViewPane"/>
  </extensions>

  <actions>
    <action class="com.intellij.tapestry.intellij.actions.navigation.ClassTemplateNavigation"
            id="ClassTemplateNavigation" text="Class &lt;-&gt; Template Navigation"
            description="Navigate from a class to it's corresponding template and vice-versa.">
      <keyboard-shortcut first-keystroke="control shift G" keymap="$default"/>
    </action>

    <action class="com.intellij.tapestry.intellij.actions.navigation.TagDocumentationNavigation"
            id="TagDocumentationNavigation" text="Tag to Documentation Navigation"
            description="Navigate from a tag to it's corresponding documentation.">
      <keyboard-shortcut first-keystroke="control shift D" keymap="$default"/>
    </action>

    <group id="GoToTapestryTemplate"
           class="com.intellij.tapestry.intellij.actions.navigation.TemplatesNavigation"
           text="Tapestry Template" description="Go to template." popup="true">
      <add-to-group group-id="EditorPopupMenu.GoTo" anchor="last"/>
    </group>

    <group id="GoToTapestryClass" text="GoToClass">
      <separator/>
      <action id="GoToClass"
              class="com.intellij.tapestry.intellij.actions.navigation.ClassTemplateNavigation"
              text="Tapestry Class" description="Go to class.">
        <keyboard-shortcut first-keystroke="control shift G" keymap="$default"/>
      </action>
      <add-to-group group-id="EditorPopupMenu.GoTo" anchor="last"/>
    </group>

    <group id="TapestryGroup" popup="true" text="Tapestry">
      <separator/>
      <action id="AddNewPageAction"
              class="com.intellij.tapestry.intellij.actions.createnew.AddNewPageAction"
              text="Page" description="Add a new page."/>
      <action id="AddNewComponentAction"
              class="com.intellij.tapestry.intellij.actions.createnew.AddNewComponentAction"
              text="Component" description="Add a new component."/>
      <action id="AddNewMixinAction"
              class="com.intellij.tapestry.intellij.actions.createnew.AddNewMixinAction"
              text="Mixin" description="Add a new mixin."/>
      <add-to-group group-id="NewGroup" relative-to-action="NewAction" anchor="after"/>
    </group>
  </actions>

  <application-components>
    <component>
      <implementation-class>com.intellij.tapestry.intellij.TapestryApplicationSupportLoader</implementation-class>
    </component>
  </application-components>

  <project-components>
    <component>
      <implementation-class>com.intellij.tapestry.intellij.TapestryProjectSupportLoader</implementation-class>
    </component>
    <component>
      <implementation-class>com.intellij.tapestry.intellij.TapestryListenersSupportLoader</implementation-class>
    </component>
  </project-components>

  <module-components>
    <component>
      <implementation-class>com.intellij.tapestry.intellij.TapestryModuleSupportLoader</implementation-class>
    </component>
  </module-components>

</idea-plugin>
